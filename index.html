<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <!-- ...باقي الكود كما هو... -->

  <style>
    /* ...باقي الستايلات كما هي... */

    /* نافذة الإدخال */
    #salaryQueryModal {
      display: none; 
      position: fixed;
      top: 0; left: 0; right:0; bottom:0;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    #salaryQueryModal .modal-content {
      background: white;
      padding: 20px;
      border-radius: 12px;
      max-width: 350px;
      width: 90%;
      text-align: right;
      direction: rtl;
    }
    #salaryQueryModal input {
      width: 100%;
      padding: 8px;
      margin: 8px 0 15px 0;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    #salaryQueryModal button {
      background-color: #4a148c;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 14px;
      cursor: pointer;
      font-size: 1rem;
      width: 100%;
    }
    #salaryQueryModal button:hover {
      background-color: #6a1b9a;
    }
    #salaryResult {
      margin-top: 15px;
      text-align: right;
      color: #333;
      font-weight: 600;
      white-space: pre-line;
    }
  </style>
</head>
<body>

<h2>👋 مرحبًا بك في البوت الخاص بشركة الدعم للمقاولات</h2>

<!-- زر النماذج -->
<button class="button" data-target="forms" onclick="toggleSection(event)">
  <i class="fas fa-file-alt"></i> النماذج
</button>
<!-- ... باقي أزرار النماذج كما في كودك ... -->

<!-- زر أرقام الهواتف -->
<button class="button" data-target="phones" onclick="toggleSection(event)">
  <i class="fas fa-phone"></i> أرقام الهواتف الداخلية
</button>
<!-- ... باقي أرقام الهواتف ... -->

<!-- زر الصفحات والمجموعات -->
<button class="button" data-target="links" onclick="toggleSection(event)">
  <i class="fas fa-globe"></i> الصفحات والمجموعات الرسمية
</button>
<!-- ... باقي الروابط ... -->

<!-- زر استعلام الراتب -->
<button class="button" onclick="openSalaryModal()">
  <i class="fas fa-money-bill-wave"></i> الاستعلام عن الراتب
</button>

<!-- مودال الاستعلام -->
<div id="salaryQueryModal">
  <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <h3 id="modalTitle">الاستعلام عن الراتب</h3>
    <label for="employeeNumber">الرقم الوظيفي:</label>
    <input type="text" id="employeeNumber" placeholder="أدخل الرقم الوظيفي" autocomplete="off" />
    <label for="employeePass">الرمز السري:</label>
    <input type="password" id="employeePass" placeholder="أدخل الرمز السري" autocomplete="off" />
    <button onclick="querySalary()">استعلام</button>
    <div id="salaryResult" role="alert" aria-live="polite"></div>
  </div>
</div>

<script>
  const webAppUrl = "https://script.google.com/macros/s/AKfycbzU3OkV-8QpPtHTmNDCrGOB5WWt4e1UaL_cfym87PesSW3Vok0k7pcbke5N0QFlwDq_/exec";

  function toggleSection(e) {
    const btn = e.currentTarget;
    const targetId = btn.getAttribute('data-target');
    const section = document.getElementById(targetId);

    const isHidden = section.classList.contains('hidden');
    ['forms', 'phones', 'links'].forEach(id => {
      if(id !== targetId) {
        document.getElementById(id).classList.add('hidden');
        document.querySelector(`button[data-target="${id}"]`).classList.remove('active');
      }
    });

    section.classList.toggle('hidden', !isHidden);
    btn.classList.toggle('active', isHidden);
  }

  function openLink(url) {
    window.open(url, '_blank');
  }

  function showFile(type) {
    // ... كما في كودك الأصلي ...
  }

  // فتح نافذة الاستعلام
  function openSalaryModal() {
    document.getElementById('salaryQueryModal').style.display = 'flex';
    document.getElementById('salaryResult').textContent = '';
    document.getElementById('employeeNumber').value = '';
    document.getElementById('employeePass').value = '';
    document.getElementById('employeeNumber').focus();
  }

  // إغلاق النافذة (يمكنك إضافة زر إغلاق لو تريد)
  // هنا تقدر تضيف مستقبلاً زر إغلاق أو إغلاق عند الضغط خارج المودال

  // إجراء الاستعلام
  async function querySalary() {
    const number = document.getElementById('employeeNumber').value.trim();
    const pass = document.getElementById('employeePass').value.trim();
    const resultDiv = document.getElementById('salaryResult');

    if(!number || !pass) {
      resultDiv.textContent = "يرجى إدخال الرقم الوظيفي والرمز السري.";
      return;
    }

    resultDiv.textContent = "جاري جلب البيانات...";

    try {
      const response = await fetch(`${webAppUrl}?number=${encodeURIComponent(number)}&pass=${encodeURIComponent(pass)}`);
      if(!response.ok) throw new Error("خطأ في الاتصال بالخادم");

      const data = await response.json();

      if(data.error) {
        resultDiv.textContent = data.error;
      } else {
        resultDiv.textContent = 
          `الاسم: ${data.name}\n` +
          `الراتب الأساسي: ${data.basic}\n` +
          `الخصميات: ${data.discount}\n` +
          `الصافي: ${data.net}`;
      }
    } catch(err) {
      resultDiv.textContent = "حدث خطأ في الاتصال، حاول مرة أخرى.";
      console.error(err);
    }
  }
</script>

</body>
</html>
